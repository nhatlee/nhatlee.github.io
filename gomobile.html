<!DOCTYPE html>
<html>
    <head>
        <title>Gomobile</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <style>
                
                body {
                    margin-top: 5px;
                    margin-left: 50px;
                    margin-right: 50px;
                    font-size: 18px;
                }
            
            item {
                margin-left: 80px;
                margin-right: 80px;
            }
            
            code {
                font-size: 15px;
                color: #33A9FF;
            }
            </style>
    </head>
    
    <body>
        <article>
        <div>
            <h3>Experiences when use Gomobile to build framework.</h3>
            <p class="title">
            When you build a mobile native application for Android and iOS, you cannot avoid the duplicate code.<br />For example: the network module which use need to write in Java/Kotlin for Android and Objective-C/Swift for iOS.<br />However, you can use Gomobile to write this module and export to a framwork for those platform, when you need update somethings, you also just need to update once and export update framework for both Android and iOS.<br />
            Have many tutorials instruct you how to build it. So I don't want to do it again. I just want to shared some my experiences when working with GoMobile.
            
            <li>Slices array:</li>
            <p class="item">
            You cannot export functions with slice array into it to mobile framework. Let support I have a method <code>func getItemsFromKey(keys: []string) ([]string error)</code>. which passing a list of keys with type string and return list values with type string. But the problem is that: you cannot passing Array type of mobile to this function like that. So I try to change this method which allow passing json string with a list keys <code>{"data" : [{"key": "a"}, {"key": "b"}]}</code>. And use struct like below to parse it:<br /><br />
            <code>
                type Data struct {<br />
                    Data []*Response `json:"data"`<br />
                }<br />
                <br />
                type Response struct {<br />
                    Key   string `json:"key"`<br />
                    Value string `json:"value"`<br />
                }<br />
                <br />
                func parseJSONString(jsonString string) []string {<br />
                    list := &Data{}<br />
                    json.Unmarshal([]byte(jsonString), &list)<br />
                    keys := make([]string, 0)<br />
                    for _, item := range configs.Data {<br />
                        keys = append(keys, item.Key)<br />
                    }<br />
                    return keys<br />
                }<br />
                <br />
                </code>
                This can solved my problem.
            
            </p>
            
<!--            <li>Interface:</li>-->
<!--            <p class="item">-->
<!--            -->
<!--            </p>-->

            </p>
        </div>
        </article>
    </body>
    
</html>
